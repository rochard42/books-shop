* [Общие положения](#общие-положения)
* [Типы данных](#типы-данных)
  * [User](#user)
  * [Session](#session)
  * [Author](#author)
  * [Book](#book)
* [Методы](#методы)
  * [POST /users](#post-users)
  * [POST /users/sessions](#post-userssessions)
  * [POST /authors](#post-authors)
  * [GET /authors](#get-authors)
  * [GET /authors/{id}](#get-authorsid)
  * [GET /authors/{id}/books](#get-authorsidbooks)
  * [PUT /authors/{id}](#put-authorsid)
  * [POST /books](#post-books)
  * [GET /books/{id}](#get-booksid)
  * [GET /books](#get-books)
  * [PUT /books/{id}](#put-booksid)
  * [DELETE /books/{id}](#delete-booksid)
* [Список ошибок](#список-ошибок)

## Общие положения
Передача параметров в методы `POST`, `PATCH` и `PUT` осуществляется с использованием типа данных `application/x-www-form-urlencoded`.

Результаты выполнения запросов передаются с использованием типа данных `application/json` в кодировке UTF-8.

Для авторизации используется строковый токен, передаваемый в заголовке `X-Auth-Token`. Токен можно получить вызовом метода [POST /users/sessions](#post-userssessions).

Ошибки возвращаются с использованием типа данных [Error](#error) и семантически соответствующим http-кодом.

## Типы данных
### User
Сущность, содержащая информацию о пользователе.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | number | да | Идентификатор пользователя. |
| name | string | да | Имя пользователя. |
| url | string | да | URL профиля пользователя. |

### Session
Сущность, содержащая информацию о сессии пользователя.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| user | [User](#user) | да | Данные пользователя. |
| token | string | да | Токен авторизации. |
| expirationDate | number | да | Дата, до которой действительна сессия в миллисекундах с 01.01.1970 UTC. |

### Author
Сущность, содержащая информацию о авторе книг.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | number | да | Уникальный идентификатор автора. |
| name | string | да | Имя автора. |
| description | string | да | Краткое описание автора. |

### Book
Сущность, содержащая информацию о книге.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | number | да | Уникальный идентификатор книги. |
| name | string | да | Наименование книги. |
| description | string | да | Краткое описание книги. |
| author | [Author](#author) | да | Автор книги. |

### Error
Сущность, содержащая информацию о ошибке.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| code | string | да | Код ошибки. |
| message | string | нет | Сообщение. |

## Методы
### POST /users
Регистрирует пользователя в сервисе.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| login | string | да | Логин пользователя. |
| password | string | да | Пароль пользователя. |

#### Ответ
[User](#user)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 5 | Пользователь с указанным логином уже зарегистрирован. |

### POST /users/sessions
Создает новую сессию пользователя.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| login | string | да | Логин пользователя. |
| password | string | да | Пароль пользователя. |

#### Ответ
[Session](#session)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 6 | Логин или пароль неверен. |

### POST /authors
Создает нового автора.

Для вызова метода необходима авторизация. Метод доступен только для пользователей с правами администратора. 

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | да | Имя автора. |
| description | string | да | Краткое описание автора. |

#### Ответ
[Author](#author)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 7 | Ошибка авторизации. |

### GET /authors
Возвращает авторов, удовлетворяющих условиям фильтра.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | нет | Имя автора. |

#### Ответ
[ [Author](#author) ]

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |

### GET /authors/{id}
Возвращает автора с указанным id.

#### Параметры запроса
\-

#### Ответ
[Author](#author)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 3 | Сервис недоступен. |
| 4 | Автор не найден. |

### GET /authors/{id}/books
Возвращает все книги автора с указанным id.

#### Параметры запроса
\-

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 3 | Сервис недоступен. |
| 4 | Автор не найден. |

#### Ответ
[ [Book](#book) ]

### PUT /authors/{id}
Изменяет автора с указанным id.

Для вызова метода необходима авторизация. Метод доступен только для пользователей с правами администратора.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | да | Имя автора. |
| description | string | да | Краткое описание автора. |

#### Ответ
[Author](#author)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 4 | Автор не найден. |
| 7 | Ошибка авторизации. |

### POST /books
Создает новую книгу. 

Для вызова метода необходима авторизация. Метод доступен только для пользователей с правами администратора.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | да | Название книги. |
| description | string | да | Краткое описание книги. |
| authorId | number | да | Id автора книги. |

#### Ответ
[Book](#book)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 7 | Ошибка авторизации. |

### GET /books/{id}
Возвращает книгу с указанным id.

#### Параметры запроса
\-

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 3 | Сервис недоступен. |
| 4 | Книга не найдена. |

#### Ответ
[Book](#book) 

### GET /books
Возвращает книгу по названию и имени автора.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | нет | Название книги. |
| authorName | string | нет | Имя автора книги. |

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |

#### Ответ
[ [Book](#book) ]

### PUT /books/{id}
Изменяет книгу с указанным id.

Для вызова метода необходима авторизация. Метод доступен только для пользователей с правами администратора.

#### Параметры запроса
| Параметр | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| name | string | да | Название книги. |
| description | string | да | Краткое описание книги. |
| authorId | number | да | Id автора книги. |

#### Ответ
[Book](#book)

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 2 | Некорректные значения параметров. |
| 3 | Сервис недоступен. |
| 4 | Книга не найдена. |
| 7 | Ошибка авторизации. |

### DELETE /books/{id}
Удаляет книгу по id.

Для вызова метода необходима авторизация. Метод доступен только для пользователей с правами администратора.

#### Параметры запроса
\-

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 3 | Сервис недоступен. |
| 4 | Книга не найдена. |
| 7 | Ошибка авторизации. |

#### Ответ
\-

## Список ошибок
| Код  | Комментарий | HTTP-код |
| --- | --- | --- |
| 1 | Внутренняя ошибка. | 500 Internal Server Error|
| 2 | Некорректные значения параметров. | 400 Bad Request |
| 3 | Сервис недоступен. | 503 Service Unavailable |
| 4 | Объект не найден. | 404 Not Found |
| 5 | Пользователь с указанным логином уже зарегистрирован. | 400 Bad Request |
| 6 | Логин или пароль неверен. | 400 Bad Request |
| 7 | Ошибка авторизации. | 401 Unauthorized |

